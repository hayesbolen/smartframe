<!--
smart-frame-liquid-glass.html
Single-file smart frame webpage (Liquid Glass theme) with:
 - Current time
 - 7-day weather forecast (OpenWeatherMap)
 - Google Calendar sign-in and upcoming events (Calendar API)

SETUP STEPS (read before using):
1) Host this page over HTTPS (Google Identity and some browsers require secure context).
2) OpenWeatherMap: create a free account at https://openweathermap.org/, get an API key. Replace OPENWEATHER_API_KEY below.
3) Google Calendar API:
   - Go to Google Cloud Console, create a project, enable the Calendar API, then create OAuth 2.0 Client ID of type "Web application".
   - Add the origin and redirect URIs that will host this page (e.g. https://yourdomain.com).
   - Copy the OAuth Client ID and paste it into GOOGLE_CLIENT_ID below.
   - Also create an API key if you'd rather use that for simple Google Calendar REST calls; the sample uses OAuth for user sign-in + Calendar API.
4) Optionally change default location: the page requests geolocation; if the device doesn't grant it, set DEFAULT_LAT and DEFAULT_LON in the JS.

Replace the placeholders below: 
 - const OPENWEATHER_API_KEY = 'YOUR_OPENWEATHER_API_KEY';
 - const GOOGLE_CLIENT_ID = 'YOUR_GOOGLE_OAUTH_CLIENT_ID.apps.googleusercontent.com';

NOTES:
 - This is a simple, single-file demo. For production you'll want to protect keys and follow OAuth best practices.
 - Google Identity uses secure origins; you must serve over HTTPS.
 - The Calendar API requires proper OAuth consent and scopes. First-time users will be prompted.
-->

<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Liquid Glass Smart Frame</title>
  <style>
    /* Liquid glass theme (glassmorphism + soft gradients) */
    :root{
      --bg1: linear-gradient(135deg, rgba(20,20,30,1), rgba(10,40,60,1));
      --accent: rgba(180, 230, 255, 0.2);
      --glass: rgba(255,255,255,0.06);
      --glass-strong: rgba(255,255,255,0.10);
      --glass-border: rgba(255,255,255,0.12);
      --card-radius: 18px;
      color-scheme: dark;
      font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }
    html,body { margin:0; padding:0; overflow:hidden; background:black; }
    body{
      display:flex;align-items:center;justify-content:center;padding:24px;box-sizing:border-box;
      background-image: radial-gradient(circle at 10% 10%, rgba(255,255,255,0.02), transparent 20%), radial-gradient(circle at 90% 90%, rgba(0,0,0,0.06), transparent 25%);
    }

    .frame{
      width:min(1100px, 98vw);
      height:min(640px, 92vh);
      border-radius: 28px;
      padding:22px;
      box-sizing:border-box;
      position:relative;
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border: 1px solid rgba(255,255,255,0.04);
      box-shadow: 0 8px 40px rgba(0,0,0,0.6), inset 0 1px 0 rgba(255,255,255,0.02);
      overflow:hidden;
      backdrop-filter: blur(8px) saturate(120%);
    }

    /* floating blurred glow to evoke liquid glass */
    .frame::before{
      content:'';position:absolute;inset:-20% -10% auto -10%;height:60%;background:linear-gradient(120deg, rgba(120,230,255,0.06), rgba(170,200,255,0.04));filter:blur(40px);transform:rotate(-8deg);pointer-events:none;
    }

    header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:14px}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{
      width:64px;height:64px;border-radius:14px;display:flex;align-items:center;justify-content:center;
      background: linear-gradient(135deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
      border:1px solid var(--glass-border);backdrop-filter: blur(6px);
    }
    .brand h1{font-size:20px;margin:0;color:rgba(240,248,255,0.95)}
    .brand p{margin:0;font-size:12px;color:rgba(220,235,255,0.7)}

    .main{
      display:grid;grid-template-columns: 1.1fr 0.9fr;gap:16px;height:calc(100% - 110px);
    }

    /* Left: big clock + weather */
    .left{display:flex;flex-direction:column;gap:14px}
    .clock-card{
      flex:0 0 46%;
      border-radius:var(--card-radius);
      padding:18px;display:flex;flex-direction:row;align-items:center;gap:18px;
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border:1px solid var(--glass-border);backdrop-filter: blur(10px);
    }
    .time{
      font-size:56px;font-weight:600;letter-spacing:1px;color:rgba(245,250,255,0.96)
    }
    .date{font-size:16px;color:rgba(220,235,255,0.75)}

    .weather-card{flex:1;border-radius:var(--card-radius);padding:12px;display:flex;flex-direction:column;gap:10px;overflow:auto;align-items:stretch;
      background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));border:1px solid var(--glass-border);backdrop-filter: blur(8px);
    }
    .forecast{display:flex;gap:8px;overflow:auto;padding-bottom:6px}
    .day{min-width:120px;padding:10px;border-radius:12px;border:1px solid rgba(255,255,255,0.03);background:rgba(255,255,255,0.015);backdrop-filter: blur(6px);}
    .day h4{margin:0;font-size:14px}
    .temp{font-size:20px;font-weight:600}
    .small{font-size:12px;color:rgba(220,230,240,0.75)}

    /* Right: Google Calendar */
    .right{display:flex;flex-direction:column;gap:12px}
    .cal-card{flex:1;border-radius:var(--card-radius);padding:12px;display:flex;flex-direction:column;gap:10px;overflow:auto;border:1px solid var(--glass-border);backdrop-filter: blur(8px);}
    .controls{display:flex;gap:10px;align-items:center}
    button{background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.06);padding:10px 12px;border-radius:10px;color:white;cursor:pointer}
    button.secondary{background:transparent;border:1px dashed rgba(255,255,255,0.05)}

    .events{display:flex;flex-direction:column;gap:8px}
    .event{padding:10px;border-radius:10px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));border:1px solid rgba(255,255,255,0.03)}
    .event h4{margin:0;font-size:14px}
    .event p{margin:0;font-size:13px;color:rgba(220,230,240,0.8)}

    footer{position:absolute;left:22px;bottom:16px;font-size:12px;color:rgba(200,220,240,0.6)}

    @media (max-width:900px){
      .main{grid-template-columns: 1fr;grid-auto-rows:1fr}
      .clock-card{flex-direction:row;gap:12px}
      .time{font-size:44px}
    }
  .fade{transition:opacity 1.5s;opacity:0;position:absolute;inset:0;}
</style>
</head>
<body>
  <div class="frame">
    <header>
      <div class="brand">
        <div class="logo">
          <!-- subtle swirl icon -->
          <svg width="34" height="34" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="g" x1="0" x2="1"><stop offset="0" stop-color="#b8f0ff" stop-opacity="0.9"/><stop offset="1" stop-color="#a6d9ff" stop-opacity="0.6"/></linearGradient></defs><path d="M12 2C8 2 6 6 6 10s2 8 6 10 6-4 6-8-2-10-6-10z" stroke="url(#g)" stroke-width="1.2" fill="rgba(255,255,255,0.02)"/></svg>
        </div>
        <div>
          <h1>Liquid Glass Frame</h1>
          <p>Time • Weekly Weather • Google Calendar</p>
        </div>
      </div>
      <div style="display:flex;gap:10px;align-items:center">
        <div id="status" style="font-size:13px;color:rgba(220,235,255,0.8)">Offline</div>
        <div id="g_id_onload"></div>
      </div>
    </header>

    <div class="main">
      <section class="left">
        <div class="clock-card" role="region" aria-label="Current time">
          <div>
            <div class="time" id="time">--:--</div>
            <div class="date" id="date">Loading date...</div>
          </div>
          <div style="flex:1"></div>
          <div style="min-width:160px;text-align:right">
            <div class="small">Location</div>
            <div id="location" class="small">Detecting...</div>
          </div>
        </div>

        <div class="weather-card" role="region" aria-label="7 day forecast">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div style="font-weight:600;color:rgba(240,248,255,0.95)">Weekly Forecast</div>
            <div class="small" id="weather-updated">—</div>
          </div>
          <div id="forecast" class="forecast" aria-live="polite">Loading forecast…</div>
        </div>
      </section>

      <aside style="position:relative;">
  <div id="slideshow" style="position:relative;width:100%;height:50%;overflow:hidden;"></div>
  <div style="display:flex;gap:10px;margin:6px 0;">
    <button id="prevImg">Prev</button>
    <button id="nextImg">Next</button>
  </div>
  <div id="weather" class="p-4 text-xl"></div>
</aside>
    </div>

    <footer>&copy; Liquid Glass • Customize colors & layout in the HTML file</footer>
  </div>

  <!-- GOOGLE AND WEATHER CONFIGURATION -->
  <script>
    // === CONFIG - REPLACE THESE VALUES ===
    const OPENWEATHER_API_KEY = 'YOUR_OPENWEATHER_API_KEY'; // <-- replace
    const GOOGLE_CLIENT_ID = 'YOUR_GOOGLE_OAUTH_CLIENT_ID.apps.googleusercontent.com'; // <-- replace
    const DEFAULT_LAT = 40.0; // fallback latitude
    const DEFAULT_LON = -88.0; // fallback longitude
    const CALENDAR_SCOPES = 'https://www.googleapis.com/auth/calendar.readonly';

    // === END CONFIG ===
  </script>

  <!-- Load Google's Identity Services library -->
  <script src="https://accounts.google.com/gsi/client" async defer></script>
  <script>
    // Clock
    function updateClock(){
      const now = new Date();
      const hh = now.getHours().toString().padStart(2,'0');
      const mm = now.getMinutes().toString().padStart(2,'0');
      document.getElementById('time').textContent = `${hh}:${mm}`;
      document.getElementById('date').textContent = now.toLocaleString(undefined,{weekday:'long',month:'short',day:'numeric'});
    }
    setInterval(updateClock, 1000);
    updateClock();

    // Weather - get geolocation then fetch 7-day forecast from OpenWeather One Call
    async function fetchWeather(lat, lon){
      const f = document.getElementById('forecast');
      try{
        const url = `https://api.openweathermap.org/data/2.5/onecall?lat=${lat}&lon=${lon}&exclude=minutely,hourly,alerts&units=metric&appid=${OPENWEATHER_API_KEY}`;
        const r = await fetch(url);
        if(!r.ok) throw new Error('Weather fetch failed');
        const data = await r.json();
        document.getElementById('weather-updated').textContent = `Updated ${new Date(data.current.dt*1000).toLocaleTimeString()}`;
        f.innerHTML = '';
        data.daily.slice(0,7).forEach(day => {
          const d = new Date(day.dt*1000);
          const el = document.createElement('div'); el.className='day';
          el.innerHTML = `<h4>${d.toLocaleDateString(undefined,{weekday:'short'})}</h4>
                          <div class='small'>${day.weather[0].description}</div>
                          <div class='temp'>${Math.round(day.temp.max)}° / ${Math.round(day.temp.min)}°</div>
                          <div class='small'>Precip: ${Math.round((day.pop||0)*100)}%</div>`;
          f.appendChild(el);
        });
      }catch(err){
        f.innerHTML = '<div class="small">Could not load weather. Check API key and network.</div>';
        console.error(err);
      }
    }

    function detectAndLoadWeather(){
      if(!OPENWEATHER_API_KEY || OPENWEATHER_API_KEY.includes('YOUR_')){
        document.getElementById('forecast').innerHTML = '<div class="small">Set your OpenWeather API key in the HTML file to see the forecast.</div>';
        return;
      }
      if(navigator.geolocation){
        navigator.geolocation.getCurrentPosition(pos =>{
          const lat = pos.coords.latitude; const lon = pos.coords.longitude;
          document.getElementById('location').textContent = `${lat.toFixed(2)}, ${lon.toFixed(2)}`;
          fetchWeather(lat,lon);
        },err=>{
          document.getElementById('location').textContent = 'Location denied';
          fetchWeather(DEFAULT_LAT, DEFAULT_LON);
        });
      }else{
        document.getElementById('location').textContent = 'Unknown';
        fetchWeather(DEFAULT_LAT, DEFAULT_LON);
      }
    }
    detectAndLoadWeather();

    // === SIMPLE GOOGLE SIGN-IN ONLY ===

let tokenClient;
function initGSI(){
  if(!GOOGLE_CLIENT_ID || GOOGLE_CLIENT_ID.includes('YOUR_')){
    document.getElementById('calendar-info').textContent = 'Set GOOGLE_CLIENT_ID to enable sign‑in.';
    return;
  }
  tokenClient = google.accounts.oauth2.initTokenClient({
    client_id: GOOGLE_CLIENT_ID,
    scope: 'openid email profile',
    callback: (tokenResp) =>{
      if(tokenResp.error){ console.error('Token error', tokenResp); return; }
      document.getElementById('calendar-info').textContent = 'Signed in!';
      document.getElementById('sign-in').style.display='none';
      document.getElementById('sign-out').style.display='inline-block';
    }
  });
  document.getElementById('sign-in').addEventListener('click', () => tokenClient.requestAccessToken());
  document.getElementById('sign-out').addEventListener('click', () =>{
    document.getElementById('calendar-info').textContent = 'Not signed in';
    document.getElementById('sign-in').style.display='inline-block';
    document.getElementById('sign-out').style.display='none';
  });
}

window.onload = () =>{
  initGSI();
  updateClock(); = () =>{
      // Try to initialize Google Identity
      initGSI();

      // If the page is hosted with an origin that supports automatic token refresh, the user may be silently signed in.
      // For simplicity we only do an explicit sign-in in this demo.

      // update clock immediately
      updateClock();
    };
  </script>
<script>
// Slideshow: auto-rotate through images in /pictures folder
const slideshowContainer = document.getElementById('slideshow');
let images = [];

async function loadImages() {
  // Placeholder static list — replace with your filenames
  // Try to fetch directory listing from a backend endpoint
  try {
    const res = await fetch('/pictures/list.json');
    const files = await res.json();
    images = files.map(f => `/pictures/${f}`);
  } catch (e) {
    // fallback static list
    const files = ['1.jpg','2.jpg','3.jpg'];
    images = files.map(f => `/pictures/${f}`);
  }
  startSlideshow();
}

let index = 0;
function startSlideshow() {
  if (!images.length) return;

  const nextImg = document.createElement('img');
  nextImg.src = images[index];
  nextImg.className = 'w-full h-full object-cover rounded-xl fade absolute inset-0';

  slideshowContainer.appendChild(nextImg);

  // Crossfade
  requestAnimationFrame(() => {
    nextImg.style.opacity = 1;
  });

  // Remove previous images after fade
  setTimeout(() => {
    const imgs = slideshowContainer.querySelectorAll('img');
    if (imgs.length > 1) imgs[0].remove();
  }, 1500);

  index = (index + 1) % images.length;
  setTimeout(startSlideshow, 5000);
}

loadImages();

// Prev/Next controls
const prevBtn = document.getElementById('prevImg');
const nextBtn = document.getElementById('nextImg');

// === Weather ===
const weatherBox = document.getElementById('weather');
const OPENWEATHER_KEY = '1514b2193808d0e774895830c417bb23';

function updateWeather(){
  if(!navigator.geolocation) return;
  navigator.geolocation.getCurrentPosition(async(pos)=>{
    const {latitude, longitude} = pos.coords;
    try{
      const url = `https://api.openweathermap.org/data/2.5/weather?lat=${latitude}&lon=${longitude}&units=imperial&appid=${OPENWEATHER_KEY}`;
      const res = await fetch(url);
      const data = await res.json();
      const t = Math.round(data.main.temp);
      const cond = data.weather?.[0]?.main || '';
      weatherBox.textContent = `${t}°F • ${cond}`;
    }catch(e){ weatherBox.textContent = 'Weather unavailable'; }
  });
}
setInterval(updateWeather, 10*60*1000);
updateWeather();

function showImage(i){
  if(!images.length) return;
  index = (i + images.length) % images.length;
  const nextImg = document.createElement('img');
  nextImg.src = images[index];
  nextImg.className = 'fade';
  slideshowContainer.appendChild(nextImg);
  requestAnimationFrame(()=>nextImg.style.opacity=1);
  setTimeout(()=>{
    const imgs = slideshowContainer.querySelectorAll('img');
    if(imgs.length>1) imgs[0].remove();
  },1500);
}

prevBtn.onclick=()=>showImage(index-1);
nextBtn.onclick=()=>showImage(index+1);
</script>
</body>
</html>
